@using TimeSheets.Core.Model
@model TimeSheets.Web.ViewModels.ShiftVM.ShiftIndexViewModel

@{
    ViewBag.Title = "Index";
}
<div class="container">
    <h2>Shifts</h2>

    @foreach (var shift in Model.ShiftList)
    {
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="">
                    <h5 class="col-md-6 col-xs-6">@shift.StartDateTime.ToString("HH:mm") - @shift.FinishDateTime.ToString("HH:mm")</h5>
                    <a href="@Url.Action("AddRemoveStaff", "Shift", new { id = shift.Id })" class ="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus-sign"></span>Add Staff</a>
                </div>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-condensed table-hover">
                        <tr>
                            <th>Name</th>
                            <th>Time In</th>
                            <th>Time Out</th>
                            <th>Lunch Break</th>
                            <th></th>
                        </tr>
                        @if (shift.StaffShifts.Count() != 0)
                        {
                            foreach (var staffShift in shift.StaffShifts)
                            {
                            <tr id="@("staffShift" + staffShift.Id)">
                                @{Html.RenderPartial("_StaffShiftRow",staffShift);}
                            </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td class="col-md-4"><span class="text-muted">No staff in shift</span></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-3"></td>
                                <td class="col-md-1"></td>
                            </tr>
                        }
                    </table>
                </div>
            </div>
        </div>
    }


    <p>
        @Html.ActionLink("New Shift", "Create", "Shift", null, new { @class = "btn btn-info" })
    </p>
</div>
